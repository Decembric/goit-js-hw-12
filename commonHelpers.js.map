{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/';\nconst API_KEY = '42373349-27b23dee84583d41aca0b8d31';\n\n\nexport default async function getPicture(query, page = 1) {\n  const response = await axios.get('api/', {\n    params: {\n      key: API_KEY,\n      per_page: 15,\n      page,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n  console.log(response)\n  return response.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n  enableKeyboard: true,\n});\nimport { hitsContainer } from \"../main\";\n\nexport default function render(hits) {\n  hitsContainer.innerHTML = '';\n  const hitsRef = hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `<ul>\n        <li><a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\"/></a></li>\n          <li><p>Likes ${likes}</p></li>\n          <li>\n            <p>Views ${views}</p>\n          </li>\n          <li><p>Comments ${comments}</p></li>\n          <li><p>Downloads ${downloads}</p></li>\n        </ul>`\n  });\n  hitsContainer.insertAdjacentHTML('beforeend', hitsRef.join(''));\n  lightbox.refresh();\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport getPicture from \"./js/pixabay-api\";\nimport render from \"./js/render-functions\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n  enableKeyboard: true,\n});\n\nexport {hitsContainer}\n\nconst hitsContainer = document.querySelector('.gallery');\nconst inputQueryRef = document.querySelector('input');\nconst formRef = document.querySelector('form');\nconst loadMoreButtonRef = document.querySelector('.js-load');\nconst loaderRef = document.querySelector('.loader');\n\nlet currentQuery = '';\nlet currentPage\nlet availablePages = 0;\n\nonHideLoaderText();\n\nfunction onShowLoaderText() {\n    loaderRef.style.display = 'block';\n    \n}\n\nfunction onHideLoaderText() {\n    loaderRef.style.display = 'none';\n}\n\nfunction onButtonLoaderShow() {\n  loadMoreButtonRef.style.display = 'show';\n}\n\nfunction onButtonLoaderHide() {\n  loadMoreButtonRef.style.display = 'none';\n}\n\nloadMoreButtonRef.addEventListener('click', onLoadMore)\n\nformRef.addEventListener('submit', onInputQuery);\n\nfunction emptyQuery() {\niziToast.show({\n      title: 'Error',\n      message: 'Please, enter a non-blank line',\n      titleSize: '16px',\n      titleLineHeight: '150%',\n      messageSize: '16px',\n      messageLineHeight: '150%',\n      backgroundColor: '#ef4040',\n      position: 'bottomRight',\n    });\n}\n\nfunction noImage() {\n  iziToast.show({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        titleSize: '16px',\n        titleLineHeight: '150%',\n        messageSize: '16px',\n        messageLineHeight: '150%',\n        backgroundColor: '#ef4040',\n        position: 'bottomRight',\n      });\n}\n\nasync function onInputQuery(evt) {\n  evt.preventDefault();\n  const query = evt.currentTarget.elements.query.value.trim();\n  try {\n    if (query === '') {\n      emptyQuery();\n      return\n    }\n    currentQuery = query;\n    currentPage = 1\n    const { hits, totalHits } = await getPicture(currentQuery, currentPage)\n    inputQueryRef.value = \"\";\n    if (totalHits !== 0) {\n      render(hits);\n      onHideLoaderText();\n    } else {\n      hitsContainer.innerHTML = \"\";\n      noImage()\n    };\n    const { height: cardHeight } = hitsContainer.getBoundingClientRect();\nwindow.scrollBy({\n  top: cardHeight * 2,\n  behavior: \"smooth\",\n});\n  } catch (error) {\n    console.error(error)\n  }\n}\n    \nasync function onLoadMore() {\n  try {\n    onShowLoaderText()\n    currentPage += 1;\n    const {hits, totalHits} = await getPicture(currentQuery, currentPage)\n    if (totalHits !== 0) {\n      render(hits);\n      onHideLoaderText();\n      onButtonLoaderShow()\n    } else {\n      hitsContainer.innerHTML = \"\";\n      noImage()\n    };\n    const { height: cardHeight } = hitsContainer.firstElementChild.getBoundingClientRect();\n\nwindow.scrollBy({\n  top: cardHeight * 2,\n  behavior: \"smooth\",\n});\n    lightbox.refresh();\n    if (currentPage === availablePages) {\n      error.endOfSearch();\n      onButtonLoaderHide()\n    }\n  } catch (error) {\n    console.error(error)\n  } \n}\n"],"names":["axios","API_KEY","getPicture","query","page","response","lightbox","SimpleLightbox","render","hits","hitsContainer","hitsRef","webformatURL","largeImageURL","tags","likes","views","comments","downloads","inputQueryRef","formRef","loadMoreButtonRef","loaderRef","currentQuery","currentPage","availablePages","onHideLoaderText","onShowLoaderText","onButtonLoaderShow","onButtonLoaderHide","onLoadMore","onInputQuery","emptyQuery","iziToast","noImage","evt","totalHits","cardHeight","error"],"mappings":"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"}