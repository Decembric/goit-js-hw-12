{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/';\nconst API_KEY = '42373349-27b23dee84583d41aca0b8d31';\n\nconst getPicture = async (query, page = 1) => {\n  const response = await axios.get('api/', {\n    params: {\n      key: API_KEY,\n      per_page: 15,\n      page,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n  return response.data;\n};\n\nexport default getPicture;\n","import { hitsContainer, lightbox } from '../main';\n\nexport default function render(hits) {\n  const hitsRef = hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `\n      <li>\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <p>Likes: ${likes}</p>\n        <p>Views: ${views}</p>\n        <p>Comments: ${comments}</p>\n        <p>Downloads: ${downloads}</p>\n      </li>`;\n  });\n  hitsContainer.insertAdjacentHTML('beforeend', hitsRef.join(''));\n  lightbox.refresh();\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport getPicture from './js/pixabay-api';\nimport render from './js/render-functions';\n\nconst hitsContainer = document.querySelector('.gallery');\nconst inputQueryRef = document.querySelector('input[name=\"query\"]');\nconst formRef = document.querySelector('form');\nconst loadMoreButtonRef = document.querySelector('.loader-button');\nconst loaderRef = document.querySelector('.loader');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n  enableKeyboard: true,\n});\n\nexport { hitsContainer, lightbox };\n\nconst imagePerPage = 15;\nlet currentQuery = '';\nlet currentPage = 1;\n\nfunction onShowLoader() {\n  loaderRef.style.display = 'block';\n}\n\nfunction onHideLoader() {\n  loaderRef.style.display = 'none';\n}\n\nfunction emptyQuery() {\n  iziToast.show({\n    title: 'Error',\n    message: 'Please, enter a non-blank line',\n    titleSize: '16px',\n    titleLineHeight: '150%',\n    messageSize: '16px',\n    messageLineHeight: '150%',\n    backgroundColor: '#ef4040',\n    position: 'bottomRight',\n  });\n}\n\nfunction noImage() {\n  iziToast.show({\n    title: 'Error',\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n    titleSize: '16px',\n    titleLineHeight: '150%',\n    messageSize: '16px',\n    messageLineHeight: '150%',\n    backgroundColor: '#ef4040',\n    position: 'bottomRight',\n  });\n}\n\nfunction endOfCollections() {\n  iziToast.show({\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    titleSize: '16px',\n    titleLineHeight: '150%',\n    messageSize: '16px',\n    messageLineHeight: '150%',\n    backgroundColor: '#6d6d6d',\n    position: 'bottomRight',\n  });\n}\n\nfunction logMessage(message) {\n  iziToast.show({\n    title: 'Error',\n    message,\n    titleSize: '16px',\n    titleLineHeight: '150%',\n    messageSize: '16px',\n    messageLineHeight: '150%',\n    backgroundColor: '#ef4040',\n    position: 'bottomRight',\n  });\n}\n\nasync function onInputQuery(event) {\n  event.preventDefault();\n  const query = inputQueryRef.value.trim();\n  if (query === '') {\n    hitsContainer.innerHTML = '';\n    emptyQuery();\n    loadMoreButtonRef.hidden = true;\n    return;\n  }\n  onShowLoader();\n  currentQuery = query;\n  currentPage = 1;\n  try {\n    const { hits, totalHits } = await getPicture(currentQuery, currentPage);\n    if (totalHits > 0) {\n      hitsContainer.innerHTML = '';\n      render(hits);\n      onHideLoader();\n      loadMoreButtonRef.hidden = false;\n    } else {\n      hitsContainer.innerHTML = '';\n      noImage();\n      loadMoreButtonRef.hidden = true;\n    }\n  } catch ({ message }) {\n    onHideLoader();\n    logMessage(message);\n  }\n}\n\nasync function onLoadMore() {\n  currentPage += 1;\n  onShowLoader();\n  try {\n    const { hits, totalHits } = await getPicture(currentQuery, currentPage);\n    render(hits);\n    const totalPages = Math.ceil(totalHits / imagePerPage);\n    if (currentPage >= totalPages) {\n      loadMoreButtonRef.hidden = true;\n      endOfCollections();\n    }\n  } catch ({ message }) {\n    logMessage(message);\n  } finally {\n    onHideLoader();\n  }\n}\n\nformRef.addEventListener('submit', onInputQuery);\nloadMoreButtonRef.addEventListener('click', onLoadMore);\n"],"names":["axios","API_KEY","getPicture","query","page","render","hits","hitsRef","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hitsContainer","lightbox","inputQueryRef","formRef","loadMoreButtonRef","loaderRef","SimpleLightbox","imagePerPage","currentQuery","currentPage","onShowLoader","onHideLoader","emptyQuery","iziToast","noImage","endOfCollections","logMessage","message","onInputQuery","event","totalHits","onLoadMore","totalPages"],"mappings":"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"}